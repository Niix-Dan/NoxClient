/*
 * This file is part of the Nox Client.
 * Made by Niix#8237
 */

package com.noxclient.mixin;

import com.noxclient.systems.config.Config;
import net.minecraft.client.resource.SplashTextResourceSupplier;
import org.spongepowered.asm.mixin.Mixin;
import org.spongepowered.asm.mixin.injection.At;
import org.spongepowered.asm.mixin.injection.Inject;
import org.spongepowered.asm.mixin.injection.callback.CallbackInfoReturnable;

import java.util.Arrays;
import java.util.List;
import java.util.Random;

@Mixin(SplashTextResourceSupplier.class)
public class SplashTextResourceSupplierMixin {
    private boolean override = true;
    private final Random random = new Random();

    private final List<String> meteorSplashes = getMeteorSplashes();

    @Inject(method = "get", at = @At("HEAD"), cancellable = true)
    private void onApply(CallbackInfoReturnable<String> cir) {
        if (Config.get() == null || !Config.get().titleScreenSplashes.get()) return;

        if (override) cir.setReturnValue(meteorSplashes.get(random.nextInt(meteorSplashes.size())));
        override = !override;
    }

    private static List<String> getMeteorSplashes() {
        return Arrays.asList(
            "§aNOX ON TOP",
            "§bNOX ON TOP",
            "§cNOX ON TOP",
            "§dNOX ON TOP",
            "§eNOX ON TOP",
            "§1NOX ON TOP",
            "§2NOX ON TOP",
            "§3NOX ON TOP",
            "§4NOX ON TOP",
            "§5NOX ON TOP",
            "§6NOX ON TOP",
            "§7NOX ON TOP",
            "§8NOX ON TOP",
            "§9NOX ON TOP",
            "§0NOX ON TOP"
        );
    }

}
